<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Reze</title>
<style>
html,body{height:100%;margin:0;font-family:monospace;overflow:hidden;background:#000;transition:background 1s;}
.bg-video{position:fixed;inset:0;z-index:1;overflow:hidden;pointer-events:none;}
.bg-video video{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:100vw;height:100vh;object-fit:cover;opacity:0;transition:opacity 1s;}
.poster-wrap{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;z-index:4;pointer-events:auto;opacity:1;transition:opacity 1s;}
.poster{max-width:80vw;max-height:80vh;cursor:pointer;transition:opacity 1s;user-select:none;}
.poster.fade-out{opacity:0;}
.unmute-btn{position:fixed;top:18px;right:18px;padding:8px 12px;border-radius:8px;background:rgba(0,0,0,.6);color:#fff;border:none;cursor:pointer;display:none;}
#consoleOverlay{position:fixed;top:0;left:0;width:100%;max-height:50%;overflow-y:auto;color:#0f0;font-size:14px;white-space:pre-wrap;padding:2px 5px;z-index:20;pointer-events:none;display:none;}
#cloudPanel{position:fixed;top:20%;left:50%;transform:translateX(-50%);width:380px;padding:15px 20px;background:rgba(0,0,0,0.8);border:1px solid #0f0;border-radius:10px;color:#0f0;z-index:25;display:none;font-family:monospace;box-shadow:0 0 15px #000;}
#cloudPanel h3{margin:0;font-size:16px;text-align:center;border-bottom:1px solid #0f0;padding-bottom:8px;display:flex;justify-content:space-between;align-items:center;}
#cloudPanel .closeBtn{cursor:pointer;font-weight:bold;font-size:16px;}
.file-list{margin-top:10px;max-height:220px;overflow-y:auto;}
.file-item{display:flex;justify-content:space-between;padding:6px 0;border-bottom:1px solid rgba(0,255,0,0.2);font-size:13px;}
.file-item a{color:#0f0;text-decoration:none;}
.file-item a:hover{text-decoration:underline;}
</style>
</head>
<body>

<div class="poster-wrap">
    <img id="poster" class="poster" src="https://github.com/2uji/2uji.github.io/blob/main/Reze.jpg?raw=true" alt="클릭하여 재생">
</div>

<div class="bg-video">
    <video id="bgVideo" playsinline preload="metadata" muted loop>
        <source src="https://github.com/2uji/2uji.github.io/raw/refs/heads/main/Reze.mp4" type="video/mp4">
    </video>
</div>

<button id="unmute" class="unmute-btn">음소거 해제</button>
<div id="consoleOverlay"></div>

<div id="cloudPanel">
  <h3>Cloud Access Panel <span class="closeBtn" id="closeCloud">✖</span></h3>
  <div class="file-list">
    <div>[INFO] No files loaded yet.</div>
  </div>
</div>

<script>
const poster=document.getElementById('poster'),
      posterWrap=document.querySelector('.poster-wrap'),
      video=document.getElementById('bgVideo'),
      unmuteBtn=document.getElementById('unmute'),
      consoleOverlay=document.getElementById('consoleOverlay'),
      cloudPanel=document.getElementById('cloudPanel'),
      closeCloud=document.getElementById('closeCloud');

let consoleStarted=false;

poster.onclick=async()=>{
  poster.classList.add('fade-out');
  posterWrap.style.pointerEvents='none';
  setTimeout(async()=>{
    posterWrap.style.opacity='0';
    video.style.opacity='1'; video.style.display='block'; video.currentTime=0; video.muted=false;
    try{await video.play();}catch{video.controls=true;}
    unmuteBtn.style.display='none'; document.body.style.cursor='none';
    startConsole();
  },500);
};

unmuteBtn.onclick=async()=>{try{video.muted=false;if(video.paused)await video.play();unmuteBtn.style.display='none';}catch{}};

function startConsole(){
  if(consoleStarted)return; consoleStarted=true;
  consoleOverlay.style.display='block'; document.body.style.cursor='auto';
  let text='',input='',idx=0;
  const prompt='> ',bootLines=['[SYS] Boot sequence initiated...','[OK] Loading environment variables...','[OK] Establishing neural link...','[INFO] Ready for input.'];
  const render=()=>{consoleOverlay.innerHTML=text+prompt+input+'<span class="cursor">█</span>'; consoleOverlay.scrollTop=consoleOverlay.scrollHeight;};
  const append=line=>{if(line)text+=line+'\n';render();};
  const boot=setInterval(()=>{append(bootLines[idx]);if(++idx>=bootLines.length){clearInterval(boot);append();}},800);

  document.addEventListener('keydown',e=>{
    if(consoleOverlay.style.display!=='block')return;
    if(e.key==='Backspace')input=input.slice(0,-1);
    else if(e.key.length===1)input+=e.key;
    else if(e.key==='Enter'){
      append(prompt+input);
      const cmd=input.toLowerCase();
      if(cmd==='mute'){
        video.muted=!video.muted;
        append(`[INFO] Video is now ${video.muted?'muted':'unmuted'}.`);
      }
      else if(cmd==='cloud'){
        append('[ACCESS] Connecting to cloud repository...');
        cloudPanel.style.display='block';
        loadCloudFiles();
      }
      else if(cmd==='clear'){
        text='';render();
      }
      else if(cmd.length>0){
        append('[ERROR] Unknown command: '+cmd);
      }
      input='';
    }
    render();
  });
  render();
}

async function loadCloudFiles(){
  const fileList=cloudPanel.querySelector('.file-list');
  fileList.innerHTML='<div>[LOADING] Fetching file list from GitHub...</div>';
  try{
    const res=await fetch('https://api.github.com/repos/2uji/cloud/contents/');
    if(!res.ok)throw new Error('HTTP '+res.status);
    const data=await res.json();

    if(!Array.isArray(data) || data.length===0){
      fileList.innerHTML='<div>[INFO] No files found in repository.</div>';
      return;
    }

    fileList.innerHTML=data.map(item=>{
      if(item.type==='file'){
        return `
          <div class="file-item">
            <span>${item.name}</span>
            <a href="${item.download_url}" download>Download</a>
          </div>`;
      }else{
        return `
          <div class="file-item">
            <span>${item.name}/</span>
            <a href="${item.html_url}" target="_blank">Open</a>
          </div>`;
      }
    }).join('');
  }catch(err){
    fileList.innerHTML=`<div style="color:red">[ERROR] Failed to load files.<br>${err.message}</div>`;
  }
}

closeCloud.onclick=()=>{cloudPanel.style.display='none';};
</script>
</body>
</html>
